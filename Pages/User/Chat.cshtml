@page
@model videoscriptAI.Pages.ChatModel
@{
    ViewData["Title"] = "Chat";
}

<div class="d-flex">
    <!-- Lista delle Chat Precedenti -->
    <div class="chat-list border-end p-3" style="width: 25%; max-height: 100vh; overflow-y: auto;">
        <h5>Chat precedenti</h5>
        <ul class="list-unstyled">
            @foreach (var chat in Model.PreviousChats)
            {
                <li>
                    <a asp-page="/Chat" asp-route-id="@chat.Id" class="text-decoration-none">@chat.Title</a>
                </li>
            }
        </ul>
    </div>

    <!-- Area della Chat -->
    <div class="chat-area flex-grow-1 p-3" style="max-height: 100vh; overflow-y: auto;">
        <h5>Chat con Gemini</h5>
        <div class="messages">
            @foreach (var message in Model.Messages)
            {
                <div class="message mb-3">
                    <strong>@message.Author:</strong>
                    <p>@message.Text</p>
                </div>
            }
        </div>

        <!-- Input per inviare nuovi messaggi -->
        <form method="post" class="mt-4">
            <div class="input-group">
                <input type="text" name="newMessage" class="form-control" placeholder="Scrivi un messaggio...">
                <button type="submit" class="btn btn-dark">Invia</button>
            </div>
        </form>
    </div>
</div>